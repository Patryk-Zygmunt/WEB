<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Tworzenie wpisu</title>
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
</head>
<body style="background-color: grey" onload="wstawczas()" >


<div id="time"> </div>



		<div ><form action="wpis.php" method="post" enctype="multipart/form-data" onsubmit="return sprawdz(this)">
<input type="hidden" name="MAX_FILE_SIZE" value="512000" />
		
			Data<br/><input id="d" type="text" name="data" value="<>"  >
			Godzina<input  id="h" type="text" name="godzina" value="<>" ><br/>
			<br/>
			
			Załączniki:<br/>
			
			
			<input type="file" name="zalacznik1"/><br/>
			<input type="file" name="zalacznik2"/><br/>
			<input type="file" name="zalacznik3"/><br/>
			<input type="submit" value="Nowy wpis"/><br/>
			<input type="reset" value="Reset"/>	
		</form></div>		
		
		
<script type="text/javascript">

function wstawczas(){
var currentDate = new Date();
element=document.getElementById('h');
data=document.getElementById('d');
minuty=currentDate.getMinutes() ;
if(minuty<10){
minuty="0"+minuty}
 element.value =  currentDate.getHours() + ":" + minuty;
    data.value =  currentDate.getDate() + "-" + (currentDate.getMonth()+1) + "-" + currentDate.getFullYear();
}

  
 
  function sprDate(form){




        
            var data = form.data.value;

            var RegDate=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\$/;
            var wynik = RegDate.match(data);
            if (wynik == null){
element=document.getElementById('time').innerHTML="czas niepoprawny </br>";
                wstawczas();
				return false;
		}
else{  
element=document.getElementById('time').innerHTML="czas poprawny </br>";
return true;
}
}

function sprCzas(form){
var=form.godzina.value;
var regex = /^(\d{2}):(\d{2})$/;
check = form.time.value.match(regex); 
	if (form.time.value != "") { 
		if (!check) { 
		element=document.getElementById('time').innerHTML="czas niepoprawny </br>";
                wstawczas();
			return false;
		}
		if (check[1] > 23) { 
		element=document.getElementById('time').innerHTML="czas niepoprawny </br>";
                wstawczas();
			return false;
		}
		if (check[2] > 59) {
element=document.getElementById('time').innerHTML="czas niepoprawny </br>";
                wstawczas();		
			return false;
		}
	 }
	else { 
	element=document.getElementById('time').innerHTML="czas niepoprawny </br>";
                wstawczas();
		return false;
	}
	element=document.getElementById('time').innerHTML="czas poprawny </br>";

	return true; 
}


function sprawdz(form) {
	if (!sprCzasTime(form) || !sprDate(form)) {return false;}
	
	else
	
	return true;
}







      
 


</script>
		

</body>
</html>
